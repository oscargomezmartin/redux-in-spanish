<!DOCTYPE HTML>
<html lang="es" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Reducers | Redux en Español</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.4.3">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-edit-link/plugin.css">
        
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-prism/prism.css">
        
    
    

        
    
    
    <link rel="next" href="../../docs/avanzado/index.html" />
    
    
    <link rel="prev" href="../../docs/basico/acciones.html" />
    

        
    </head>
    <body>
        
        
    <div class="book" data-level="2.2" data-basepath="../.." data-revision="Sat Oct 29 2016 22:41:04 GMT-0300 (ART)">
    

<div class="book-summary">
    <div class="book-search" role="search">
        <input type="text" placeholder="Escribe para buscar" class="form-control" />
    </div>
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Read Me
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="docs/introduccion/index.html">
            
                
                    <a href="../../docs/introduccion/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Introducción
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="docs/introduccion/motivacion.html">
            
                
                    <a href="../../docs/introduccion/motivacion.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        Motivación
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="docs/introduccion/tres-principios.html">
            
                
                    <a href="../../docs/introduccion/tres-principios.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        Tres Principios
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="docs/introduccion/herencia.html">
            
                
                    <a href="../../docs/introduccion/herencia.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.</b>
                        
                        Herencia
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="docs/introduccion/ecosistema.html">
            
                
                    <a href="../../docs/introduccion/ecosistema.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.4.</b>
                        
                        Ecosistema
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="docs/introduccion/ejemplos.html">
            
                
                    <a href="../../docs/introduccion/ejemplos.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.5.</b>
                        
                        Ejemplos
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="docs/basico/index.html">
            
                
                    <a href="../../docs/basico/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Básico
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="docs/basico/acciones.html">
            
                
                    <a href="../../docs/basico/acciones.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        Acciones
                    </a>
            
            
        </li>
    
        <li class="chapter active" data-level="2.2" data-path="docs/basico/reducers.html">
            
                
                    <a href="../../docs/basico/reducers.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                        Reducers
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="docs/basico/store.html">
            
            <span><b>2.3.</b> Store</span>
            
            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="docs/basico/flujo-de-datos.html">
            
            <span><b>2.4.</b> Flujo de datos</span>
            
            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="docs/basico/uso-con-react.html">
            
            <span><b>2.5.</b> Uso con React</span>
            
            
        </li>
    
        <li class="chapter " data-level="2.6" data-path="docs/basico/ejemplo-todos.html">
            
            <span><b>2.6.</b> Ejemplo: Lista de TODOs</span>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" data-path="docs/avanzado/index.html">
            
                
                    <a href="../../docs/avanzado/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Avanzado
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="docs/avanzado/acciones-asincronas.html">
            
            <span><b>3.1.</b> Acciones asíncronas</span>
            
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="docs/avanzado/flujo-asincrono.html">
            
                
                    <a href="../../docs/avanzado/flujo-asincrono.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                        Flujo asíncrono
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="docs/avanzado/middleware.html">
            
            <span><b>3.3.</b> Middleware</span>
            
            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="docs/avanzado/uso-con-react-router.html">
            
            <span><b>3.4.</b> Uso con React Router</span>
            
            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="docs/avanzado/ejemplo-api-reddit.html">
            
            <span><b>3.5.</b> Ejemplo: API Reddit</span>
            
            
        </li>
    
        <li class="chapter " data-level="3.6" data-path="docs/avanzado/siguientes-pasos.html">
            
            <span><b>3.6.</b> Siguientes pasos</span>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" data-path="docs/recetas/index.html">
            
                
                    <a href="../../docs/recetas/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        Recetas
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="docs/recetas/migrando-a-redux.html">
            
                
                    <a href="../../docs/recetas/migrando-a-redux.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                        Migrando a Redux
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="docs/recetas/usando-el-operador-spread-en-objetos.html">
            
            <span><b>4.2.</b> Usando el operador Spread en objetos</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="docs/recetas/reduciendo-boilerplate.html">
            
            <span><b>4.3.</b> Reduciendo el Boilerplate</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.4" data-path="docs/recetas/render-en-el-servidor.html">
            
            <span><b>4.4.</b> Render en el Servidor</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.5" data-path="docs/recetas/escribiendo-pruebas.html">
            
            <span><b>4.5.</b> Escribiendo pruebas</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.6" data-path="docs/recetas/calculando-datos-obtenidos.html">
            
            <span><b>4.6.</b> Calculando Datos Obtenidos</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.7" data-path="docs/recetas/implementando-deshacer.html">
            
            <span><b>4.7.</b> Implementando Deshacer</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.8" data-path="docs/recetas/aislando-subapps.html">
            
            <span><b>4.8.</b> Aislando subaplicaciones</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.9" data-path="docs/recetas/estructurando-reducers.html">
            
            <span><b>4.9.</b> Estructurando reducers</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.9.1" data-path="docs/recipes/reducers/conceptos-prerequeridos.html">
            
            <span><b>4.9.1.</b> Conceptos prerequeridos</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.9.2" data-path="docs/recetas/reducers/estructura-basica-de-reducers.html">
            
            <span><b>4.9.2.</b> Estructuras básica de reducers</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.9.3" data-path="docs/recetas/reducers/separando-logica-de-reducers.html">
            
            <span><b>4.9.3.</b> Separando lógica de reducers</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.9.4" data-path="docs/recetas/reducers/ejemplo-refactorizando-reducers.html">
            
            <span><b>4.9.4.</b> Ejemplo: Refactorizando reducers</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.9.5" data-path="docs/recetas/reducers/usando-combineReducers.html">
            
            <span><b>4.9.5.</b> Usando `combineReducers`</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.9.6" data-path="docs/recetas/reducers/mas-alla-de-combineReducers.html">
            
            <span><b>4.9.6.</b> Más allá de `combineReducers`</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.9.7" data-path="docs/recetas/reducers/normalizando-la-forma-del-estado.html">
            
            <span><b>4.9.7.</b> Normalizando la forma del estado</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.9.8" data-path="docs/recetas/reducers/actualizando-datos-normalizados.html">
            
            <span><b>4.9.8.</b> Actualizando datos normalizados</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.9.9" data-path="docs/recetas/reducers/reusando-logica-en-reducers.html">
            
            <span><b>4.9.9.</b> Reusando lógica en reducers</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.9.10" data-path="docs/recetas/reducers/patrones-de-eactualizacion-inmutables.html">
            
            <span><b>4.9.10.</b> Patrones de actualización inmutables</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.9.11" data-path="docs/recetas/reducers/inicializando-el-estado.html">
            
            <span><b>4.9.11.</b> Inicializando el estado</span>
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5" data-path="docs/FAQ.html">
            
            <span><b>5.</b> FAQ</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1" data-path="docs/faq/general.html">
            
            <span><b>5.1.</b> General</span>
            
            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="docs/faq/reducers.html">
            
            <span><b>5.2.</b> Reducers</span>
            
            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="docs/faq/organizando-el-estado.html">
            
            <span><b>5.3.</b> Organizando el estado</span>
            
            
        </li>
    
        <li class="chapter " data-level="5.4" data-path="docs/faq/configurando-el-store.html">
            
            <span><b>5.4.</b> Configurando el Store</span>
            
            
        </li>
    
        <li class="chapter " data-level="5.5" data-path="docs/faq/acciones.html">
            
            <span><b>5.5.</b> Acciones</span>
            
            
        </li>
    
        <li class="chapter " data-level="5.6" data-path="docs/faq/estructura-de-codigo.html">
            
            <span><b>5.6.</b> Estructura de código</span>
            
            
        </li>
    
        <li class="chapter " data-level="5.7" data-path="docs/faq/rendimiento.html">
            
            <span><b>5.7.</b> Rendimiento</span>
            
            
        </li>
    
        <li class="chapter " data-level="5.8" data-path="docs/faq/react-redux.html">
            
            <span><b>5.8.</b> React Redux</span>
            
            
        </li>
    
        <li class="chapter " data-level="5.9" data-path="docs/faq/miscelaneo.html">
            
            <span><b>5.9.</b> Misceláneo</span>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6" data-path="docs/solucion-de-problemas.html">
            
                
                    <a href="../../docs/solucion-de-problemas.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                        Solución de problemas
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7" data-path="docs/glosario.html">
            
                
                    <a href="../../docs/glosario.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                        Glosario
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8" data-path="docs/api/index.html">
            
                
                    <a href="../../docs/api/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                        Referencia API
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.1" data-path="docs/api/create-store.html">
            
                
                    <a href="../../docs/api/create-store.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.1.</b>
                        
                        createStore
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.2" data-path="docs/api/Store.html">
            
                
                    <a href="../../docs/api/Store.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.</b>
                        
                        Store
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.3" data-path="docs/api/combine-reducers.html">
            
                
                    <a href="../../docs/api/combine-reducers.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.3.</b>
                        
                        combineReducers
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.4" data-path="docs/api/apply-middleware.html">
            
                
                    <a href="../../docs/api/apply-middleware.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.4.</b>
                        
                        applyMiddleware
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.5" data-path="docs/api/bind-action-creators.html">
            
                
                    <a href="../../docs/api/bind-action-creators.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.5.</b>
                        
                        bindActionCreators
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.6" data-path="docs/api/compose.html">
            
                
                    <a href="../../docs/api/compose.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.6.</b>
                        
                        compose
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="9" data-path="docs/CHANGELOG.html">
            
                
                    <a href="../../docs/CHANGELOG.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.</b>
                        
                        Registro de cambios
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="10" data-path="docs/PATRONS.html">
            
                
                    <a href="../../docs/PATRONS.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.</b>
                        
                        Patrocinadores
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="11" data-path="docs/feedback.html">
            
                
                    <a href="../../docs/feedback.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>11.</b>
                        
                        Feedback
                    </a>
            
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Publicado con GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Tabla de contenido"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Busca"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Configuración de fuente"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">Claro</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sépia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Noche</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Comparte"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">
                    Comparte en Twitter
                </button>
                <button type="button" data-sharing="google-plus" class="button">
                    Comparte en Google
                </button>
                <button type="button" data-sharing="facebook" class="button">
                    Comparte en Facebook
                </button>
                <button type="button" data-sharing="weibo" class="button">
                    Comparte en Weibo
                </button>
                <button type="button" data-sharing="instapaper" class="button">
                    Comparte en Instapaper
                </button>
            </div>
        </div>
    </div>
    

    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Google"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Twitter"><i class="fa fa-twitter"></i></a>
    
    
    


    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../../" >Redux en Español</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <a id="edit-link" href="https://github.com/sergiodxa/redux-in-spanish/tree/master/docs/basico/reducers.md" class="btn fa fa-edit pull-left">&nbsp;&nbsp;Contribuye</a><h1 id="reducers">Reducers</h1>
<p>Las <a href="acciones.html">acciones</a> describen que <em>algo paso</em>, pero no especifican como el estado de la aplicaci&#xF3;n cambio en respuesta. Esto es trabajo de los reducers.</p>
<h2 id="dise%C3%B1ando-la-forma-del-estado">Dise&#xF1;ando la forma del estado</h2>
<p>En Redux, todo el estado de la aplicaci&#xF3;n es almacenado en un &#xFA;nico objeto. Es una buena idea pensar en su forma antes de escribir c&#xF3;digo. &#xBF;Cu&#xE1;l es la m&#xED;nima representaci&#xF3;n del estado de la aplicaci&#xF3;n como un objeto?</p>
<p>Para nuestra aplicaci&#xF3;n de tareas, vamos a querer guardar dos cosas diferentes:</p>
<ul>
<li>El filtro de visibilidad actualmente seleccionado;</li>
<li>La lista actual de tareas.</li>
</ul>
<p>Algunas veces vas a ver que necesitas almacenar algunos datos, as&#xED; como el estado de la UI, en el &#xE1;rbol de estado. Esto esta bien, pero trata de mantener los datos separado del estado de la UI.</p>
<pre><code class="lang-js"><span class="token punctuation">{</span>
  visibilityFilter<span class="token punctuation">:</span> <span class="token string">&apos;SHOW_ALL&apos;</span><span class="token punctuation">,</span>
  todos<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      text<span class="token punctuation">:</span> <span class="token string">&apos;Consider using Redux&apos;</span><span class="token punctuation">,</span>
      completed<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      text<span class="token punctuation">:</span> <span class="token string">&apos;Keep all state in a single tree&apos;</span><span class="token punctuation">,</span>
      completed<span class="token punctuation">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<blockquote>
<h5 id="nota-sobre-relaciones">Nota sobre relaciones</h5>
<p>En aplicaciones m&#xE1;s complejas, vas a necesitar tener diferentes entidades que se referencien una a otra. Sugerimos mantener el estado tan normalizado como sea posible, sin nada de anidaci&#xF3;n. Mantener cada entidad en un objeto con el ID como llave, y usa los IDs para referenciar otras entidades, o para listas. Piensa en el estado de la aplicaci&#xF3;n como una base de datos. Este enfoque es descripto en la documentaci&#xF3;n de <a href="https://github.com/gaearon/normalizr" target="_blank">normalizr&apos;s</a> m&#xE1;s detalladamente. Por ejemplo, manteniendo <code>todosById: { id -&gt;  todo }</code> y <code>todos: array<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span></code> dentro del estado es mejor para una aplicaci&#xF3;n real, pero lo vamos a matener simple para el ejemplo.</p>
</blockquote>
<h2 id="manejando-acciones">Manejando Acciones</h2>
<p>Ahora que decidimos como se va a ver nuestro objeto de estado, estamos listos para escribir nuestro reducer. El reducer es una funci&#xF3;n pura que toma el estado anterior y una acci&#xF3;n, y devuelve en nuevo estado.</p>
<pre><code class="lang-js"><span class="token punctuation">(</span>previousState<span class="token punctuation">,</span> action<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> newState
</code></pre>
<p>Se llama reducer porque es el tipo de funci&#xF3;n que pasar&#xED;as a <a href="https://developer.mozilla.org/es/docs/Web/JavaScript/Referencia/Objetos_globales/Array/reduce" target="_blank"><code>Array.prototype.reduce(reducer, ?initialValue)</code></a>. Es muy importante que los reducer se mantengan puros. Cosas que <strong>nunca</strong> deber&#xED;as hacer dentron de un reducer:</p>
<ul>
<li>Modificar sus argumentos;</li>
<li>Realizar tareas con efectos secundarios como llamas a un API o transiciones de rutas.</li>
<li>Llamar una funci&#xF3;n no pura, por ejemplo <code>Date.now()</code> o <code>Math.random()</code>.</li>
</ul>
<p>En la <a href="../avanzado/index.html">gu&#xED;a avanzada</a> vamos a ver como realizar efectos secundarios. Por ahora, solo recuerda que los reducers deben ser puros. <strong>Dados los mismos argumentos, deber&#xED;a calcular y devolver el siguiente estado. Sin sorpresas. Sin efectos secundarios. Sin llamadas a APIs. Sin mutaciones. Solo c&#xE1;lculos.</strong></p>
<p>Con esto dicho, vamos a empezar a escribir nuestro reducer gradualmente ense&#xF1;andole como entender las <a href="../acciones.md">acciones</a> que definimos antes.</p>
<p>Vamos a empezar por especificar el estado inicial. Redux va a llamar a nuestros reducers con <code>undefined</code> como valor del estado la primera vez. Esta es nuestra oportunidad de devolver el estado inicial de nuestra applicaci&#xF3;n.</p>
<pre><code class="lang-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> VisibilityFilters <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;./actions&apos;</span>

<span class="token keyword">const</span> initialState <span class="token operator">=</span> <span class="token punctuation">{</span>
  visibilityFilter<span class="token punctuation">:</span> VisibilityFilters<span class="token punctuation">.</span>SHOW_ALL<span class="token punctuation">,</span>
  todos<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">todoApp</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> action<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> state <span class="token operator">===</span> <span class="token string">&apos;undefined&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> initialState
  <span class="token punctuation">}</span>

  <span class="token comment" spellcheck="true">// Por ahora, no maneja ninguna acci&#xF3;n</span>
  <span class="token comment" spellcheck="true">// y solo devuelve el estado que recibimos.</span>
  <span class="token keyword">return</span> state
<span class="token punctuation">}</span>
</code></pre>
<p>Un estupendo truco es usar la <a href="https://developer.mozilla.org/es/docs/Web/JavaScript/Referencia/Funciones/Parametros_por_defecto" target="_blank">sint&#xE1;xis de par&#xE1;metros por defecto de ES6</a> para hacer lo anterior de forma m&#xE1;s compacta:</p>
<pre><code class="lang-js"><span class="token keyword">function</span> <span class="token function">todoApp</span><span class="token punctuation">(</span>state <span class="token operator">=</span> initialState<span class="token punctuation">,</span> action<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// Por ahora, no maneja ninguna acci&#xF3;n</span>
  <span class="token comment" spellcheck="true">// y solo devuelve el estado que recibimos.</span>
  <span class="token keyword">return</span> state
<span class="token punctuation">}</span>
</code></pre>
<p>Ahora vamos a manejar <code>SET_VISIBILITY_FILTER</code>. Todo lo que necesitamos hacer es cambiar la propiedad <code>visibilityFilter</code> en el estado. F&#xE1;cil:</p>
<pre><code class="lang-js"><span class="token keyword">function</span> <span class="token function">todoApp</span><span class="token punctuation">(</span>state <span class="token operator">=</span> initialState<span class="token punctuation">,</span> action<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> SET_VISIBILITY_FILTER<span class="token punctuation">:</span>
      <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> state<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        visibilityFilter<span class="token punctuation">:</span> action<span class="token punctuation">.</span>filter
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">default</span><span class="token punctuation">:</span>
      <span class="token keyword">return</span> state
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Nota que:</p>
<ol>
<li><p><strong>No modificamos el <code>state</code>.</strong> Creamos una copia con <a href="https://developer.mozilla.org/es/docs/Web/JavaScript/Referencia/Objetos_globales/Object/assign" target="_blank"><code>Object.assign()</code></a>. <code>Object.assign(state, { visibilityFilter: action.filter })</code> tambi&#xE9;n estar&#xED;a mal: esto modificar&#xED;a el primero argumento. <strong>Debes</strong> mandar un objeto vac&#xED;o como primer par&#xE1;metro. Tambi&#xE9;n puedes activar la <a href="https://developer.mozilla.org/es/docs/Web/JavaScript/Referencia/Operadores/Spread_operator" target="_blank">propuesta del operador spread</a> para escribir <code>{ ...state, ...newState }</code>.</p>
</li>
<li><p><strong>Devolvemos el anterior <code>state</code> en el caso <code>default</code></strong>. Es importarte devolver el anterior <code>state</code> por cualquier acci&#xF3;n desconocida.</p>
</li>
</ol>
<blockquote>
<h5 id="nota-sobre-object-assign">Nota sobre <code>Object.assign</code></h5>
<p><a href="https://developer.mozilla.org/es/docs/Web/JavaScript/Referencia/Objetos_globales/Object/assign" target="_blank"><code>Object.assign()</code></a> es parte de ES6, pero no esta implementado en la mayor&#xED;a de los navegadores todav&#xED;a. Vas a necesitar usar ya sea un polyfill,  el <a href="https://www.npmjs.com/package/babel-plugin-object-assign" target="_blank">plugin de Babel</a>, o alguna otra funci&#xF3;n como <a href="https://lodash.com/docs#assign" target="_blank"><code>_.assign()</code></a>.</p>
<h5 id="nota-sobre-switch-y-boilerplate">Nota sobre <code>switch</code> y Boilerplate</h5>
<p>La sentencia <code>switch</code> no es verdadero boilerplate. El verdadero boilerplate de Flux es conceptual: la necesidad de emitir una actualizaci&#xF3;n, la necesidad de registrar el Store con el Dispatcher, la necesidad de que el Store sea un objeto (y las complicaciones que existen para hacer aplicaciones universales). Redux resuelve estos problemas usando reducers puros en vez de emisores de eventos.</p>
<p>Desafortunadamente muchos todav&#xED;a eligen un framework basados en si usan <code>switch</code> en su documentaci&#xF3;n. Si no te gusta <code>switch</code>, puedes usar alguna funci&#xF3;n <code>createReducer</code> personalizada que acepte un mapa, como se ve en <a href="../recetas/reduciendo-el-boilerplate.md#reducers">&quot;Reduciendo el Boilerplate&quot;</a>.</p>
</blockquote>
<h2 id="manejando-m%C3%A1s-acciones">Manejando m&#xE1;s acciones</h2>
<p>&#xA1;Todav&#xED;a tenemos dos acciones m&#xE1;s que manejar! Vamos a extender nuestro reducer para manejar <code>ADD_TODO</code>.</p>
<pre><code class="lang-js"><span class="token keyword">function</span> <span class="token function">todoApp</span><span class="token punctuation">(</span>state <span class="token operator">=</span> initialState<span class="token punctuation">,</span> action<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> SET_VISIBILITY_FILTER<span class="token punctuation">:</span>
      <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> state<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        visibilityFilter<span class="token punctuation">:</span> action<span class="token punctuation">.</span>filter
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> ADD_TODO<span class="token punctuation">:</span>
      <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> state<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        todos<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>todos<span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            text<span class="token punctuation">:</span> action<span class="token punctuation">.</span>text<span class="token punctuation">,</span>
            completed<span class="token punctuation">:</span> <span class="token boolean">false</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>    
    <span class="token keyword">default</span><span class="token punctuation">:</span>
      <span class="token keyword">return</span> state
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Tal cual como antes, nunca modificamos directamente <code>state</code> o sus propiedades, en cambio devolvemos un nuevo objeto. El nuevo <code>todos</code> es igual al viejo <code>todos</code> agreg&#xE1;ndole un &#xFA;nico objeto nuevo al final. La tarea m&#xE1;s nueva es creada usando los datos de la acci&#xF3;n.</p>
<p>Finalmente, la implementaci&#xF3;n de <code>COMPLETE_TODO</code> no va a venir con ninguna una sorpresa:</p>
<pre><code class="lang-js"><span class="token keyword">case</span> COMPLETE_TODO<span class="token punctuation">:</span>
  <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> state<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    todos<span class="token punctuation">:</span> state<span class="token punctuation">.</span>todos<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>todo<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">===</span> action<span class="token punctuation">.</span>index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> todo<span class="token punctuation">,</span> <span class="token punctuation">{</span>
          completed<span class="token punctuation">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> todo
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>Debido a que queremos actualizar un objeto espec&#xED;fico del array sin recurrir a modificaciones, necesitamos crear un nuevo array con los mismo objetos menos el objeto en la posici&#xF3;n. Si te encuentras realizando mucho estas operaciones, es una buena idea usar utilidades como <a href="https://facebook.github.io/react/docs/update.html" target="_blank">react-addons-update</a>, <a href="https://github.com/substantial/updeep" target="_blank">updeep</a>, o incluso una librer&#xED;a como <a href="http://facebook.github.io/immutable-js/" target="_blank">Immutable</a> que tienen soporte nativo a actualizaciones profundas. Solo recuerda nunca asignar nada a algo dentro de <code>state</code> antes de clonarlo primeor.</p>
<h2 id="separando-reducers">Separando Reducers</h2>
<p>Este es nuestro c&#xF3;digo hasta ahora. Es algo 
Here is our code so far. It is rather verboso:</p>
<pre><code class="lang-js"><span class="token keyword">function</span> <span class="token function">todoApp</span><span class="token punctuation">(</span>state <span class="token operator">=</span> initialState<span class="token punctuation">,</span> action<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> SET_VISIBILITY_FILTER<span class="token punctuation">:</span>
      <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> state<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        visibilityFilter<span class="token punctuation">:</span> action<span class="token punctuation">.</span>filter
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> ADD_TODO<span class="token punctuation">:</span>
      <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> state<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        todos<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>todos<span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            text<span class="token punctuation">:</span> action<span class="token punctuation">.</span>text<span class="token punctuation">,</span>
            completed<span class="token punctuation">:</span> <span class="token boolean">false</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> COMPLETE_TODO<span class="token punctuation">:</span>
      <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> state<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        todos<span class="token punctuation">:</span> state<span class="token punctuation">.</span>todos<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>todo<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span><span class="token punctuation">(</span>index <span class="token operator">===</span> action<span class="token punctuation">.</span>index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> todo<span class="token punctuation">,</span> <span class="token punctuation">{</span>
              completed<span class="token punctuation">:</span> <span class="token boolean">true</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
          <span class="token keyword">return</span> todo
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">default</span><span class="token punctuation">:</span>
      <span class="token keyword">return</span> state
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#xBF;Hay alguna forma de hacerlo m&#xE1;s f&#xE1;cil de entender? Parece que <code>todos</code> y <code>visibilityFilter</code> se actualizan de forma completamente separadas. Algunas veces campos del estado dependen uno de otro y hay que tener en cuenta m&#xE1;s cosas, pero ne nuestro caso podemos facilmente actualizar <code>todos</code> en una funci&#xF3;n separada:</p>
<pre><code class="lang-js"><span class="token keyword">function</span> <span class="token function">todos</span><span class="token punctuation">(</span>state <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> action<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> ADD_TODO<span class="token punctuation">:</span>
      <span class="token keyword">return</span> <span class="token punctuation">[</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>state<span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          text<span class="token punctuation">:</span> action<span class="token punctuation">.</span>text<span class="token punctuation">,</span>
          completed<span class="token punctuation">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token keyword">case</span> COMPLETE_TODO<span class="token punctuation">:</span>
      <span class="token keyword">return</span> state<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>todo<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">===</span> action<span class="token punctuation">.</span>index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> todo<span class="token punctuation">,</span> <span class="token punctuation">{</span>
            completed<span class="token punctuation">:</span> <span class="token boolean">true</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> todo
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">default</span><span class="token punctuation">:</span>
      <span class="token keyword">return</span> state
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">todoApp</span><span class="token punctuation">(</span>state <span class="token operator">=</span> initialState<span class="token punctuation">,</span> action<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> SET_VISIBILITY_FILTER<span class="token punctuation">:</span>
      <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> state<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        visibilityFilter<span class="token punctuation">:</span> action<span class="token punctuation">.</span>filter
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> ADD_TODO<span class="token punctuation">:</span>
    <span class="token keyword">case</span> COMPLETE_TODO<span class="token punctuation">:</span>
      <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> state<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        todos<span class="token punctuation">:</span> <span class="token function">todos</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>todos<span class="token punctuation">,</span> action<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">default</span><span class="token punctuation">:</span>
      <span class="token keyword">return</span> state
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Fijate que <code>todos</code> acepta <code>state</code>&#x2014;&#xA1;Pero es un array! Ahora <code>todoApp</code> solo le manda una parte del estado para que la maneje, y <code>todos</code> sabe como actualizar esa parte. <strong>Esto es llamado <em>composici&#xF3;n de reducers</em>, y es un patr&#xF3;n fundamental al construir aplicaciones de Redux.</strong></p>
<p>Vamos a explorar la composici&#xF3;n de reducers un poco m&#xE1;s. &#xBF;Podemos extraer a otro reducer el control de <code>visibilityFilter</code>? Podemos:</p>
<pre><code class="lang-js"><span class="token keyword">function</span> <span class="token function">visibilityFilter</span><span class="token punctuation">(</span>state <span class="token operator">=</span> SHOW_ALL<span class="token punctuation">,</span> action<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">case</span> SET_VISIBILITY_FILTER<span class="token punctuation">:</span>
    <span class="token keyword">return</span> action<span class="token punctuation">.</span>filter
  <span class="token keyword">default</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> state
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Ahora podemos reescribir el reducer principal como una funci&#xF3;n que llama a los reducers que controlan distintas partes del estado, y los combina en un solo objeto. Ni siquiera necesita saber el estado inicial. Es suficiente con que los reducers hijos devuelvan su estado inicial cuando reciben <code>undefined</code> la primera vez.</p>
<pre><code class="lang-js"><span class="token keyword">function</span> <span class="token function">todos</span><span class="token punctuation">(</span>state <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> action<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> ADD_TODO<span class="token punctuation">:</span>
      <span class="token keyword">return</span> <span class="token punctuation">[</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>state<span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          text<span class="token punctuation">:</span> action<span class="token punctuation">.</span>text<span class="token punctuation">,</span>
          completed<span class="token punctuation">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token keyword">case</span> COMPLETE_TODO<span class="token punctuation">:</span>
      <span class="token keyword">return</span> state<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>todo<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">===</span> action<span class="token punctuation">.</span>index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> todo<span class="token punctuation">,</span> <span class="token punctuation">{</span>
            completed<span class="token punctuation">:</span> <span class="token boolean">true</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> todo
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">default</span><span class="token punctuation">:</span>
      <span class="token keyword">return</span> state
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">visibilityFilter</span><span class="token punctuation">(</span>state <span class="token operator">=</span> SHOW_ALL<span class="token punctuation">,</span> action<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> SET_VISIBILITY_FILTER<span class="token punctuation">:</span>
      <span class="token keyword">return</span> action<span class="token punctuation">.</span>filter
    <span class="token keyword">default</span><span class="token punctuation">:</span>
      <span class="token keyword">return</span> state
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">todoApp</span><span class="token punctuation">(</span>state <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> action<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    visibilityFilter<span class="token punctuation">:</span> <span class="token function">visibilityFilter</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>visibilityFilter<span class="token punctuation">,</span> action<span class="token punctuation">)</span><span class="token punctuation">,</span>
    todos<span class="token punctuation">:</span> <span class="token function">todos</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>todos<span class="token punctuation">,</span> action<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>Nota que cada uno de estos reducers esta manejando su propia parte del estado global. El par&#xE1;metro <code>state</code> es diferente por cada reducer, y corresponde con la parte del estado que controla.</strong></p>
<p>&#xA1;Esto ya se esta viendo mejor! Cuando una aplicaci&#xF3;n es muy grande, podemos dividir nuestros reducers en archivos separados y mantenerlos completamente independientes y controlando datos espec&#xED;ficos.</p>
<p>Por &#xFA;ltimo, Redux viene con una utilidad llamada <a href="../api/combine-reducers.html"><code>combineReducers()</code></a> que realiza la misma l&#xF3;gica que usa <code>todoApp</code> arriba. Con su ayuda, podemos reescribir <code>todoApp</code> de esta forma.</p>
<pre><code class="lang-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> combineReducers <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;redux&apos;</span>

<span class="token keyword">const</span> todoApp <span class="token operator">=</span> <span class="token function">combineReducers</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  visibilityFilter<span class="token punctuation">,</span>
  todos
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> todoApp
</code></pre>
<p>Fijate que esto es exactamente lo mismo que:</p>
<pre><code class="lang-js"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">todoApp</span><span class="token punctuation">(</span>state <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> action<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    visibilityFilter<span class="token punctuation">:</span> <span class="token function">visibilityFilter</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>visibilityFilter<span class="token punctuation">,</span> action<span class="token punctuation">)</span><span class="token punctuation">,</span>
    todos<span class="token punctuation">:</span> <span class="token function">todos</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>todos<span class="token punctuation">,</span> action<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Adem&#xE1;s puedes darles diferentes nombres, o llamar funciones diferentes. Estas dos formas de combinar reducers son exactamente lo mismo:</p>
<pre><code class="lang-js"><span class="token keyword">const</span> reducer <span class="token operator">=</span> <span class="token function">combineReducers</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  a<span class="token punctuation">:</span> doSomethingWithA<span class="token punctuation">,</span>
  b<span class="token punctuation">:</span> processB<span class="token punctuation">,</span>
  c<span class="token punctuation">:</span> c
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<pre><code class="lang-js"><span class="token keyword">function</span> <span class="token function">reducer</span><span class="token punctuation">(</span>state <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> action<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    a<span class="token punctuation">:</span> <span class="token function">doSomethingWithA</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>a<span class="token punctuation">,</span> action<span class="token punctuation">)</span><span class="token punctuation">,</span>
    b<span class="token punctuation">:</span> <span class="token function">processB</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>b<span class="token punctuation">,</span> action<span class="token punctuation">)</span><span class="token punctuation">,</span>
    c<span class="token punctuation">:</span> <span class="token function">c</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>c<span class="token punctuation">,</span> action<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Todo lo que <a href="../api/combine-reducers.html"><code>combineReducers()</code></a> hace es generar una funci&#xF3;n que llama a tus reducers <strong>con la parte del estado seleccionada de acuerdo a su propiedad</strong>, y combinar sus resultados en un &#xFA;nico objeto. <a href="https://github.com/reactjs/redux/issues/428#issuecomment-129223274" target="_blank">It&#x2019;s not magic.</a>.</p>
<blockquote>
<h5 id="nota-para-expertos-de-es6">Nota para expertos de ES6</h5>
<p>Ya que <code>combineReducers</code> espera un objeto, podemos poner todos nuestros reducers en un archivo separado, <code>export</code> cada funci&#xF3;n reductora, y usar <code>import * as reducers</code> para obtenerlos todos juntos como objetos con sus nombres como propiedades.</p>
<pre><code class="lang-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> combineReducers <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;redux&apos;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> reducers <span class="token keyword">from</span> <span class="token string">&apos;./reducers&apos;</span>

<span class="token keyword">const</span> todoApp <span class="token operator">=</span> <span class="token function">combineReducers</span><span class="token punctuation">(</span>reducers<span class="token punctuation">)</span>
</code></pre>
<p>Ya que <code>import *</code> es todav&#xED;a una sintaxis nueva, no la usamos m&#xE1;s en la documentaci&#xF3;n para evitar <a href="https://github.com/reactjs/redux/issues/428#issuecomment-129223274" target="_blank">confusiones</a>, pero probalemente te encuentro con algunos ejemplos en la comunidad.</p>
</blockquote>
<h2 id="c%C3%B3digo-fuente">C&#xF3;digo fuente</h2>
<h4 id="-reducers-js"><code>reducers.js</code></h4>
<pre><code class="lang-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> combineReducers <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;redux&apos;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ADD_TODO<span class="token punctuation">,</span> COMPLETE_TODO<span class="token punctuation">,</span> SET_VISIBILITY_FILTER<span class="token punctuation">,</span> VisibilityFilters <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;./actions&apos;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> SHOW_ALL <span class="token punctuation">}</span> <span class="token operator">=</span> VisibilityFilters

<span class="token keyword">function</span> <span class="token function">visibilityFilter</span><span class="token punctuation">(</span>state <span class="token operator">=</span> SHOW_ALL<span class="token punctuation">,</span> action<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> SET_VISIBILITY_FILTER<span class="token punctuation">:</span>
      <span class="token keyword">return</span> action<span class="token punctuation">.</span>filter
    <span class="token keyword">default</span><span class="token punctuation">:</span>
      <span class="token keyword">return</span> state
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">todos</span><span class="token punctuation">(</span>state <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> action<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> ADD_TODO<span class="token punctuation">:</span>
      <span class="token keyword">return</span> <span class="token punctuation">[</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>state<span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          text<span class="token punctuation">:</span> action<span class="token punctuation">.</span>text<span class="token punctuation">,</span>
          completed<span class="token punctuation">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token keyword">case</span> COMPLETE_TODO<span class="token punctuation">:</span>
      <span class="token keyword">return</span> state<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>todo<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">===</span> action<span class="token punctuation">.</span>index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> todo<span class="token punctuation">,</span> <span class="token punctuation">{</span>
            completed<span class="token punctuation">:</span> <span class="token boolean">true</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> todo
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">default</span><span class="token punctuation">:</span>
      <span class="token keyword">return</span> state
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> todoApp <span class="token operator">=</span> <span class="token function">combineReducers</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  visibilityFilter<span class="token punctuation">,</span>
  todos
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> todoApp
</code></pre>
<h2 id="siguientes-pasos">Siguientes pasos</h2>
<p>A continuaci&#xF3;n, vamos a ver como <a href="store.md">crear un store de Redux</a> que contenga todo el estado y se encargue de llamar a nuestro reducer cuando se despache una acci&#xF3;n.</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../../docs/basico/acciones.html" class="navigation navigation-prev " aria-label="Previous page: Acciones"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../../docs/avanzado/index.html" class="navigation navigation-next " aria-label="Next page: Avanzado"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../../gitbook/app.js"></script>

    
    <script src="../../gitbook/plugins/gitbook-plugin-edit-link/plugin.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-github/plugin.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-anker-enable/anker.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2},"edit-link":{"base":"https://github.com/sergiodxa/redux-in-spanish/tree/master","label":"Contribuye"},"github":{"url":"https://github.com/sergiodxa/redux-in-spanish/"},"ga":{"token":"UA-48432002-3"}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
